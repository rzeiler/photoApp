myApp.controller("albumController",["$scope","$sce","$http","$routeParams","$location","$timeout",function(b,a,g,e,f,d){$("nav.white").addClass("z-depth-0");$("div.navbar-fixed nav").show();$("div#nav").addClass("navbar-fixed");b.index.title="Album";b.index.showCollapse=true;b.index.links=[];b.index.btns=[];b.templateUrl="views/album_form.html";b.parentobj={};b.parentobj.folder={};b.parentobj.folder.id=-1;g.post("tph.php",{action:"get_folders",id:b.parentobj.folder.id}).then(function(h){b.parentobj.albums=h.data.folders;b.owner=h.data.owner;b.ownerName=h.data.name;b.parentobj.users=h.data.users;b.parentobj.name=h.data.name});b.open=function c(i,h){f.path("/photo/"+i)};b.edit=function(i,h){e.id=i;alert("edit")}}]);myApp.controller("modalAlbumController",["$scope","$http","$routeParams","$timeout",function(a,e,c,b){var d=c.id;if(d===undefined){d=-1;a.modalTitle="New Album"}else{a.modalTitle="Edit Album"}a.$watch("parentobj.users",function(h,g){if(h!==undefined){$("#acc").html("");for(var j=0;j<h.length;j++){var f=h[j];$("#acc").append('<option value="'+f.id+'" '+f.selected+" "+f.disabled+">"+f.name+"</option>")}a.name=a.parentobj.name;a.tit=a.parentobj.folder.title;a.des=a.parentobj.folder.detail;b(function(){$(".modal").modal();$("select").material_select();Materialize.updateTextFields()},0)}},true);a.save=function(){var f=$("#acc").val();var g="set_folder";if(d==-1){g="add_folder"}e.post("tph.php",{action:g,id:d,title:a.tit,detail:a.des,owner:a.owner,access:f}).then(function(h){Materialize.updateTextFields();if(d==-1){a.parentobj.albums=h.data.folders}Materialize.toast(h.data.message,2000)})}}]);